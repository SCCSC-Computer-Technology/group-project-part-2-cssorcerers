@using SportsData.Models
@model F1DriversViewModel
@{
	//Layout = "_layout";
	ViewData["title"] = "F1 Drivers";
}

<head>
	<link rel="stylesheet" href="~/css/common.css">
	
</head>

<!--Sorting and navigation-->
<div style="display: flex; gap: 10px;">

	<!--Page numbers-->
	<div style="width: 160px;">
		<p style="margin-bottom: 2px; margin-right: 10px; float: left; text-align: center;">Page</p>
		<br />
		<div style="display: flex; gap: 10px; float: left;">
			<input type="text" min="1" max="@Model.MaxPage" id="pageInput" value="@Model.CurrentPage" style="text-align: right; margin-top: 3px; width: 80px; height: 20px" />
			<p> / @Model.MaxPage</p>
		</div>
	</div>

	
</div>



<div style="display: flex; gap: 10px;">
	<a class="btn btn-primary" style="background-color:darkblue" asp-controller="f1" asp-action="AllDrivers"
	asp-route-page="1" asp-route-driverID="@Model.DriverID" asp-route-sort="@Model.SortOrder" role="button">&lt;&lt;</a>

	<a class="btn btn-primary" style="background-color:darkblue" asp-controller="f1" asp-action="AllDrivers"
	   asp-route-page="@(Model.CurrentPage > 1 ? Model.CurrentPage-1 : 1)"
	   asp-route-driverID="@Model.DriverID" asp-route-sort="@Model.SortOrder" role="button">&lt;</a>

	<a class="btn btn-primary" style="background-color:darkblue" asp-controller="f1" asp-action="AllDrivers"
	   asp-route-page="@(Model.CurrentPage < Model.MaxPage ? Model.CurrentPage+1 : Model.MaxPage)" 
	   asp-route-driverID="@Model.DriverID" asp-route-sort="@Model.SortOrder" role="button">&gt;</a>

	<a class="btn btn-primary" style="background-color:darkblue" asp-controller="f1" asp-action="AllDrivers"
	   asp-route-page="@Model.MaxPage" asp-route-driverID="@Model.DriverID"
	asp-route-sort="@Model.SortOrder" role="button">&gt;&gt;</a>
</div>


<table class="table table-hover table-light table-striped" style="margin-top: 10px; overflow-x: clip; overflow-y: scroll;  border: 2px ridge darkblue; width: 100%; table-layout: fixed; vertical-align: middle;">
	<thead style="text-align:center; vertical-align: middle; padding: 5px;">
		<tr style="height: 50px;">
			<td id="headCell">
				<a asp-controller="f1" asp-action="AllDrivers"
				   asp-route-page="@Model.CurrentPage"  asp-route-driverID="@Model.DriverID"
				asp-route-sort="@(Model.SortOrder == "name_asc" ? "name_desc" : "name_asc")">
					Driver
				</a>
			</td>

			<td id="headCell" style="width: 300px;">
				Code
			</td>
		</tr>
	</thead>
	@if (Model != null)
	{
		<tbody style="text-align: center; padding: 5px; vertical-align: middle;">
			@foreach (F1DriverInfo driver in Model.F1Driver)
			{
				<tr style="vertical-align: middle;">
					<td id="dataCell">
						<a href="@Url.Action("Drivers", "F1", new { driverID = driver.DriverID })">
							@(driver.Name ?? "Unknown")
						</a>
					</td>

					<td id="dataCell" >
						<a href="@Url.Action("Drivers", "F1", new { driverID = driver.DriverID })">
							@(driver.Code ?? "Unknown")
						</a>
					</td>

				</tr>

			}
		</tbody>
	}
</table>

<script>

	

	let pageInput = document.getElementById('pageInput');
	pageInput.addEventListener('keydown', function(event)
	{
		if(event.key === 'Enter')
		{
			let page = Number(pageInput.value);
			if(!isNaN(page))
			{
				window.location.href = `/f1/AllDrivers?page=${page}&driverID=${@Model.DriverID}&sort=${@Model.SortOrder}`;
			}
			else
			{
				alert("Page number must be numeric");
				pageInput.value = @Model.CurrentPage;
			}
		}
	});

	function Redirect(link)
	{
		window.open(link, "_blank");
	}

	/*function LoadActive()
	{
		let isActive = document.getElementById("activeSelect").value;
		window.location.href = `/f1/players?active=${isActive == "Active" ? "True" : isActive == "Retired" ? "False" : isActive}`;
	}*/
</script>
